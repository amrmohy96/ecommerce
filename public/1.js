(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{13:function(t,e,n){"use strict";n.r(e);var a=function(t,e,n,a,i,s,o,r){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=d):i&&(d=r?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(t,e){return d.call(e),l(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:c}}({data:function(){return{read:{},unread:{},unreadCount:0}},created:function(){var t=this;this.getNotifications();var e=$('meta[name="userId"]').attr("content");Echo.private("App.User."+e).notification((function(e){t.unread.unshift(e),t.unreadCount++}))},methods:{getNotifications:function(){var t=this;axios.get("user/notifications/get").then((function(e){t.read=e.data.read,t.unread=e.data.unread,t.unreadCount=e.data.unread.length})).catch((function(t){return Exception.handle(t)}))},readNotifications:function(t){var e=this;axios.post("user/notifications/read",{id:t.id}).then((function(n){e.unread.splice(t,1),e.read.push(t),e.unreadCount--}))}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dropdown dropdown-notification nav-item"},[n("a",{staticClass:"nav-link nav-link-label",attrs:{"data-toggle":"dropdown",href:"#"}},[n("i",{staticClass:" ft-bell icons-small"}),t._v(" "),t.unreadCount>0?n("span",{staticClass:"badge badge-pill badge-danger badge-up badge-glow"},[t._v(t._s(t.unreadCount))]):t._e()]),t._v(" "),t.unreadCount>0?n("ul",{staticClass:"dropdown-menu dropdown-menu-media dropdown-menu-right"},[t._m(0),t._v(" "),t._l(t.unread,(function(e){return n("li",{key:e.id,staticClass:"scrollable-container media-list w-100"},[n("a",[n("div",{staticClass:"media"},[t._m(1,!0),t._v(" "),n("div",{staticClass:"media-body"},[n("p",{staticClass:"notification-text font-small-3 text-muted"},[t._v("\n                            "+t._s(e.data.coupon)+"\n                            "+t._s(e.data.discount)+"\n                        ")]),n("small",[n("time",{staticClass:"media-meta text-muted",attrs:{datetime:"2015-06-11T18:29:20+08:00"}},[t._v("\n                            "+t._s(e.data.created_at)+"\n                        ")])])])])])])})),t._v(" "),t._m(2)],2):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"dropdown-menu-header"},[e("h6",{staticClass:"dropdown-header m-0"},[e("span",{staticClass:"grey darken-2"},[this._v("Notifications")])]),this._v(" "),e("span",{staticClass:"notification-tag badge badge-danger float-right m-0"},[this._v("New")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"media-left align-self-center"},[e("i",{staticClass:"ft-plus-square icon-bg-circle bg-cyan mr-0"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"dropdown-menu-footer"},[e("a",{staticClass:"dropdown-item text-muted text-center",attrs:{href:"javascript:void(0)"}},[this._v("Read all\n            notifications")])])}],!1,null,null,null);e.default=a.exports}}]);